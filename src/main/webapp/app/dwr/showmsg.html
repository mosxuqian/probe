<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>显示dwr推送消息的页面</title>
    <script type='text/javascript' src='/probe/dwr/engine.js'></script>
    <script type='text/javascript' src='/probe/dwr/interface/MessagePush.js'></script>
</head>
<script>
    //通过该方法与后台交互，确保推送时能找到指定用户
    function onPageLoad(){
        var email = 'blinkfoxcom@gmail.com';
        MessagePush.onPageLoad(email);
    }

    /**
     * 初始化页面需要执行的js
     */
    function initPage() {
        onPageLoad();
        dwr.engine.setActiveReverseAjax(true);
        dwr.engine.setNotifyServerOnPageUnload(true);
    }

    //推送信息
    function showMessage(autoMessage){
        document.getElementById('demoDiv').innerHTML = autoMessage;
    }
</script>
<body onload="initPage();">
    This is my DWR push show message page. <hr>
    <br>
    <div id="demoDiv"></div>
</body>
</html>